(this.webpackJsonppodcastprioritizer=this.webpackJsonppodcastprioritizer||[]).push([[0],{104:function(e,t){},144:function(e,t,a){"use strict";a.r(t);var s=a(0),o=a.n(s),n=a(55),i=a.n(n),r=a(3),l=a(4),c=a(6),u=a(5),d=(a(63),a(10)),m=a.n(d),p=a(16),h=a(23),f=a.n(h),g=a(8),v=a(7),y=function(e){return o.a.createElement("div",{className:"preloader"+e.styleName},o.a.createElement("p",null,"Loading"),o.a.createElement(v.a,{icon:g.d,className:"preloader"}))},T=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(r.a)(this,a),(e=t.call(this)).getAddressFromApi=function(e){return m()({url:"https://www.mapquestapi.com/search/v3/prediction",method:"GET",responseType:"jsonp",params:{key:"TpZYQMsUgBgXUKt2b3xmQCxKpHB7JWoS",format:"png",limit:"5",collection:"adminArea,address,category,franchise,airport,poi",countryCode:"CA",q:e}})},e.setFromState=function(t){e.setState({userInputFrom:t,htmlFrom:""})},e.setToState=function(t){e.setState({userInputTo:t,htmlTo:""})},e.handleUlClick=function(t){if(t.preventDefault(),e.handleClickOutside(t),"button"===t.target.localName&&t.target.parentNode.parentNode.classList.contains("fromAddress")){var a=t.target.parentNode.innerText;e.setFromState(a)}if("li"===t.target.localName&&t.target.parentNode.classList.contains("fromAddress")){var s=t.target.innerText;e.setFromState(s)}if("li"===t.target.localName&&t.target.parentNode.classList.contains("toAddress")){var o=t.target.innerText;e.setToState(o)}if("button"===t.target.localName&&t.target.parentNode.parentNode.classList.contains("toAddress")){var n=t.target.parentNode.innerText;e.setToState(n)}},e.extractList=function(e){var t="";return e&&e.data.results?e.data.results.forEach((function(e){t+='<li><button><img src="https://assets.mapquestapi.com/icon/v2/marker.png" alt="drop icon"></img>'.concat(e.displayString,"</button></li>")})):t="",t},e.handleUserInput=function(t){t.target.classList.contains("fromInput")&&(t.target.value?(e.setState({userInputFrom:t.target.value}),t.target.value.length>1&&e.getAddressFromApi(t.target.value).then((function(t){var a=e.extractList(t);e.setState({htmlFrom:a||""})}))):e.setState({userInputFrom:"",htmlFrom:""})),t.target.classList.contains("toInput")&&(t.target.value?(e.setState({userInputTo:t.target.value}),t.target.value.length>1&&e.getAddressFromApi(t.target.value).then((function(t){var a=e.extractList(t);e.setState({htmlTo:a||""})}))):e.setState({userInputTo:"",htmlTo:""}))},e.state={userInputFrom:"",userInputTo:"",htmlFrom:"",htmlTo:"",podcastInput:"",isFromListExpanded:!1,isToListExpanded:!1},e.setULRef=e.setULRef.bind(Object(p.a)(e)),e.handleClickOutside=e.handleClickOutside.bind(Object(p.a)(e)),e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"setULRef",value:function(e){this.ULRef=e}},{key:"handleClickOutside",value:function(e){this.ULRef&&!this.ULRef.contains(e.target)&&this.setState({htmlFrom:"",htmlTo:""})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"whereTo",id:"whereTo"},o.a.createElement("div",{className:"whereToContainer wrapper"},o.a.createElement("h2",null,"Where To Go?"),o.a.createElement("form",{action:"submit",className:"searchForm",autoComplete:"off"},o.a.createElement("div",{className:"addressSearchInput"},o.a.createElement("label",{htmlFor:"fromaddress"},"Starting Location"),o.a.createElement("input",{type:"text",name:"fromaddress",className:"addressSearch fromInput",placeholder:"1 Canada's Wonderland Drive, Vaughan, ON L6A 1S6",value:this.state.userInputFrom,onKeyUp:this.handleUserInput,onChange:this.handleUserInput,onFocus:function(){return e.setState({isFromListExpanded:!0})}}),this.state.htmlFrom&&this.state.isFromListExpanded?o.a.createElement("ul",{className:"suggestions fromAddress",onClick:this.handleUlClick,onMouseDown:this.handleUlClick,ref:this.setULRef},f()(this.state.htmlFrom)):""),o.a.createElement("div",{className:"addressSearchInput"},o.a.createElement("label",{htmlFor:"toaddress"},"Destination"),o.a.createElement("input",{type:"text",name:"toaddress",className:"addressSearch toInput",placeholder:"288 Bremner Blvd, Toronto, ON M5V 3L9",value:this.state.userInputTo,onKeyUp:this.handleUserInput,onChange:this.handleUserInput,onFocus:function(){return e.setState({isToListExpanded:!0})}}),this.state.htmlTo&&this.state.isToListExpanded?o.a.createElement("ul",{className:"suggestions toAddress",onClick:this.handleUlClick,onMouseDown:this.handleUlClick,ref:this.setULRef},f()(this.state.htmlTo)):""),o.a.createElement("button",{type:"submit",onClick:function(t){e.props.submitForm(t,e.state.userInputFrom,e.state.userInputTo),e.props.loadMapUrl()}},"Search")),o.a.createElement("ol",{className:"whereToInstructions"},o.a.createElement("h3",null,"Instructions"),o.a.createElement("li",null,"Type in your starting and desired destination address in the input field."),o.a.createElement("li",null,"Once you are satisfied with your entries, click search to find out the length of your commute."),o.a.createElement("li",null,"Next, select your preferred method of travel. We recommend the shorter travel time, but otherwise, it is completely optional."))),this.props.isLoadingMap?o.a.createElement(y,{styleName:"WhereTo"}):null)}}]),a}(s.Component);var E=function(e){return o.a.createElement("section",{className:"hero wrapper"},o.a.createElement("div",{className:"whiteBlock"},o.a.createElement("h1",null,"Podcast Prioritizer"),o.a.createElement("div",{className:"heroTextContainer"},o.a.createElement("p",{className:"heroTextTagline"},"Say goodbye to dull and boring commutes!"),o.a.createElement("p",{className:"heroText"},"Podcast Prioritizer will fill your long and uneventful commutes with informative and juicy podcasts for your listening pleasure. Simply enter your starting location, desired destination and topic of interest and we will suggest a lists of podcasts based on the length of your journey."," ",o.a.createElement("a",{href:"#",className:"startLink","aria-label":"Click here to proceed to the next section",onClick:e.goToInput},"\xa0Let's Start!")))))};var L=function(e){e.current.scrollIntoView({behavior:"smooth"})},b=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(r.a)(this,a),(e=t.call(this)).handleChange=function(t){e.setState({podcastInput:t.target.value})},e.state={podcastInput:""},e.podcastRef=o.a.createRef(),e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){L(this.podcastRef)}},{key:"componentDidUpdate",value:function(){L(this.podcastRef)}},{key:"render",value:function(){var e=this;return o.a.createElement("section",{className:"whatToListen"},o.a.createElement("div",{className:"whatToListenContainer wrapper"},o.a.createElement("form",{className:"searchForm podcastSearchForm"},o.a.createElement("h2",{ref:this.podcastRef,className:"podcastSearchHeader"},"What to Listen?"),o.a.createElement("div",{className:"podcastSearchInput"},o.a.createElement("label",{htmlFor:"podcast"}),o.a.createElement("input",{placeholder:"Your topic of interest (e.g. finance, pets, health)",className:"podcastSearch",type:"text",id:"podcast",value:this.state.podcastInput,onChange:this.handleChange}),o.a.createElement("button",{type:"submit",onClick:function(t){e.props.submitForm(t,e.state.podcastInput),e.props.loadPodcastList()}},"Search"))),o.a.createElement("ol",{className:"whatToListenInstructions"},o.a.createElement("h3",null,"Instructions"),o.a.createElement("li",null,"Type your topic of interest into the input field above and click search once you are ready."),o.a.createElement("li",null,"Afterwards, you will be automatically directed to a list of curated podcasts based on your chosen topic and the length of your commute."),o.a.createElement("li",null,"Click the listen button to hear a podcast. Happy listening!"))))}}]),a}(s.Component),N=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(r.a)(this,a),(e=t.call(this)).handleClick=function(t){t.persist();var a=t.target.id||t.target.parentElement.id||t.target.parentElement.parentElement.id;e.setState({travelType:a}),e.props.chooseTravelType(a)},e.state={travelType:"walk"},e}return Object(l.a)(a,[{key:"render",value:function(){return o.a.createElement("section",{className:"travelTypeSection"},o.a.createElement("div",{className:"travelTypeSelection wrapper"},o.a.createElement("h2",{className:"travelHeading"},"Travel Preference?"),o.a.createElement("p",{className:"travelTypeText"},"We suggest the faster route, but please pick whatever option suits you best."),o.a.createElement("p",{className:"travelTypeText"},"Warning: Biking with headphones on is"," ",o.a.createElement("span",{className:"emphasisText"},"not")," suggested."),o.a.createElement("p",{className:"travelTypeText"},"Please be safe when listening to audio while cycling."),o.a.createElement("div",{className:"travelTypeButtonContainer"},o.a.createElement("button",{id:"walk",onClick:this.handleClick,className:"walk"===this.state.travelType?"active":"inactive"},o.a.createElement(v.a,{icon:"walking",className:"icon"}),o.a.createElement("p",null,"your walking travel time is ".concat(this.props.walkTime," hour(s)"))),o.a.createElement("button",{id:"cycle",onClick:this.handleClick,className:"cycle"===this.state.travelType?"active":"inactive"},o.a.createElement(v.a,{icon:"biking",className:"icon"}),o.a.createElement("p",null,"your cycling travel time is ".concat(this.props.cycleTime," hour(s)"))))))}}]),a}(s.Component),w=a(56),k=a.n(w),S=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(r.a)(this,a),(e=t.call(this)).showMore=function(){return e.setState({showAll:!0})},e.showLess=function(){return e.setState({showAll:!1})},e.state={podcastList:[]},e.podcastListRef=o.a.createRef(),e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(e,t){this.props.podcastList!==t.podcastList&&(this.setState({podcastList:this.props.podcastList}),L(this.podcastListRef))}},{key:"componentDidMount",value:function(){this.setState({podcastList:this.props.podcastList}),L(this.podcastListRef)}},{key:"render",value:function(){var e=this;return o.a.createElement("section",{className:"podcastDisplay"},o.a.createElement("div",{className:"wrapper"},o.a.createElement("h2",{ref:this.podcastListRef,className:"podcastHeader"},"Pick Your Podcast"),this.props.isLoadingPodcast?o.a.createElement(y,{styleName:"PodcastDisplay"}):null,this.props.isLoadingPodcast?null:o.a.createElement("ul",{className:"podcastGrid "},this.props.podcastList.map((function(t){return o.a.createElement("li",{className:"podcastList",key:t.id},o.a.createElement("div",{className:"podcastImgContainer"},o.a.createElement("img",{src:t.thumbnail,alt:t.title_highlighted,className:"podcastImg"}),o.a.createElement("button",{className:"audioButton",onClick:function(){return e.props.getAudioItem(t)}},o.a.createElement(v.a,{icon:g.c}),"\xa0Listen")),o.a.createElement("div",{className:"podcastInfo"},o.a.createElement("h3",null,t.title_original),o.a.createElement(k.a,{ref:e.Readmore,charLimit:200,readMoreText:"Read More",readLessText:"\xa0Read Less"},t.description_original),o.a.createElement("p",{className:"podcastLength"},"Length: ",Math.floor(t.audio_length_sec/60)," ","minutes")))})))))}}]),a}(s.Component),C=a(13),M=a.n(C),A=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(r.a)(this,a),(e=t.call(this)).audio=new Audio,e.getFormattedTime=function(e){var t=Math.floor(e/3600),a=Math.floor(e/60)%60,s=e%60;return a=a<10&&a>=0?"0"+a:a,s=s<10&&s>=0?"0"+s:s,e=t?"".concat(t,":").concat(a,":").concat(s):"".concat(a,":").concat(s)},e.setAudio=function(){var t=e.props.audioToPlay;e.setState({isAudioPlaying:!1,toggleButton:"\u25b6\ufe0f",progress:"0",audioFile:t.audio,timeLeft:e.getFormattedTime(t.audio_length_sec)}),e.audio.src=t.audio,e.audio.currentTime=0,setTimeout(e.playAudio,1e3)},e.showAlert=function(){M.a.fire({title:"Uh-oh!",text:"This audio is not available at the moment. Please select another podcast!",confirmButtonText:"OK",padding:"2rem"})},e.playAudio=function(){var t=!1;e.audio.duration?(e.setState({isAudioPlaying:!0,toggleButton:"\u275a \u275a"}),e.audio.play()):e.state.callNumber?t=!0:setTimeout((function(){e.playAudio(),e.setState({callNumber:1})}),2e3),t&&e.showAlert()},e.pauseAudio=function(){e.setState({isAudioPlaying:!1,toggleButton:"\u25b6\ufe0f"}),e.audio.pause()},e.togglePlay=function(){e.state.isAudioPlaying?e.pauseAudio():e.playAudio()},e.scrubAudio=function(t){t.persist();var a=t.nativeEvent.offsetX/e.progressBar.current.offsetWidth*e.audio.duration;e.audio.currentTime=a},e.handleProgress=function(){var t=e.audio.currentTime/e.audio.duration*100,a=Math.floor(e.audio.duration-e.audio.currentTime);a=e.getFormattedTime(a),t&&e.setState({timeLeft:a,progress:"".concat(t)})},e.state={isAudioPlaying:!1,toggleButton:"\u25b6\ufe0f",progress:"",timeLeft:"00:00",mouseDown:!1,audioFile:"",callNumber:0},e.progressBar=o.a.createRef(),e.audioPlayerRef=o.a.createRef(),e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(e,t){this.props.audioToPlay.audio!==t.audioFile&&(this.setAudio(),L(this.audioPlayerRef))}},{key:"componentDidMount",value:function(){this.setState({isAudioPlaying:!1,toggleButton:"\u25b6\ufe0f"}),this.audio.src=this.props.audioToPlay.audio,this.audio.ontimeupdate=this.handleProgress,setTimeout(this.playAudio,1e3),L(this.audioPlayerRef)}},{key:"render",value:function(){var e=this,t=this.props.audioToPlay;return o.a.createElement("div",{className:"wrapper audioWrapper"},o.a.createElement("h2",{className:"audioHeader"},"Your Podcast"),o.a.createElement("div",{className:"playerThumbnail"},o.a.createElement("img",{src:t.thumbnail,alt:t.title})),o.a.createElement("div",{ref:this.audioPlayerRef,className:"audioControl"},o.a.createElement("button",{className:"playerButton toggle",title:"Toggle Play",onClick:function(){return e.togglePlay()}},this.state.toggleButton),o.a.createElement("div",{className:"progress",ref:this.progressBar,onMouseDown:function(){return e.setState({mouseDown:!0})},onMouseUp:function(){return e.setState({mouseDown:!1})},onMouseMove:function(t){return e.state.mouseDown&&e.scrubAudio(t)}},o.a.createElement("div",{className:"progressFilled",style:{flexBasis:"".concat(this.state.progress,"%")}})),o.a.createElement("p",{className:"timeLeft"},this.state.timeLeft)))}}]),a}(s.Component),P=function(){return o.a.createElement("footer",null,o.a.createElement("div",{className:"wrapper"},o.a.createElement("p",null,"Copyright ",o.a.createElement("span",{"aria-hidden":"true"},"\xa9")," 2020 by Anna Liang, Ranjodh Singh and Mahsa Ashtari")))},x=a(17),U=a(57);x.b.add(U.a,g.e,g.b,g.a);var I=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(r.a)(this,a),(e=t.call(this)).goToScroll=function(t){t.preventDefault(),L(e.inputAddressRef)},e.handleAddressSubmit=function(t,a,s){t.preventDefault(),m()({url:"https://www.mapquestapi.com/staticmap/v5/map",method:"GET",responseType:"json",params:{key:"TpZYQMsUgBgXUKt2b3xmQCxKpHB7JWoS",format:"png",start:a,end:s,size:"500,200@2x",countryCode:"CA",routeColor:"F97068",routeWidth:5,scalebar:!0,margin:40}}).then((function(t){e.setState({staticMapUrl:t.request.responseURL,isLoadingMap:!1},(function(){e.state.staticMapUrl&&""!==e.state.formatedWalkTime&&setTimeout((function(){return L(e.staticMapRef)}),0)}))})),""!==a&&""!==s&&m()({method:"GET",url:"https://www.mapquestapi.com/directions/v2/route",params:{key:"TpZYQMsUgBgXUKt2b3xmQCxKpHB7JWoS",from:a,to:s,countryCode:"CA",routeType:"pedestrian",unit:"k"}}).then((function(t){void 0!==t.data.route.formattedTime&&void 0!==t.data.route.time&&"00:00:00"!==t.data.route.formattedTime&&"00:00:00"!==t.data.route.time?e.setState({formatedWalkTime:t.data.route.formattedTime,walkTime:t.data.route.time}):e.showInvalidAddressModal()})),m()({method:"GET",url:"https://www.mapquestapi.com/directions/v2/route",params:{key:"TpZYQMsUgBgXUKt2b3xmQCxKpHB7JWoS",from:a,to:s,countryCode:"CA",routeType:"bicycle",unit:"k"}}).then((function(t){void 0!==t.data.route.formattedTime&&void 0!==t.data.route.time&&"00:00:00"!==t.data.route.formattedTime&&"00:00:00"!==t.data.route.time?e.setState({formatedCycleTime:t.data.route.formattedTime,cycleTime:t.data.route.time}):e.showInvalidAddressModal()}))},e.showInvalidAddressModal=function(){M.a.fire({title:"Uh-oh!",text:"You must enter in a valid starting and destination address if you wish to proceed.",confirmButtonText:"OK",padding:"2rem"}),e.setState({isLoadingMap:!1})},e.loadMapUrl=function(){e.setState({isLoadingMap:!0})},e.loadPodcastList=function(){e.setState({isLoadingPodcast:!0})},e.handlePodcastSubmit=function(t,a){t.preventDefault();var s=0;"walk"===e.state.travelType?s=Math.floor(e.state.walkTime/60):"cycle"===e.state.travelType&&(s=Math.floor(e.state.cycleTime/60));var o=s-5,n=s+5;""!==e.state.walkTime&&""!==e.state.travelType?m()({url:"https://listen-api.listennotes.com/api/v2/search",method:"GET",headers:{"X-ListenAPI-Key":"0be4947c18024c2d8a5bb0dcb11eb2ac"},dataResponse:"jsonp",params:{q:'"'.concat(a,'"'),type:"episode",language:"English",len_min:o,len_max:n}}).then((function(t){0===t.data.results.length?(M.a.fire({title:"Uh-oh!",text:"Sorry, there are no podcasts that match your search criteria. Please choose another topic!",confirmButtonText:"OK",padding:"2rem"}),e.setState({podcastList:t.data.results,isLoadingPodcast:!1})):e.setState({podcastList:t.data.results,isLoadingPodcast:!1})})):M.a.fire({title:"Uh-oh!",text:"Please select a travel preference first before proceeding.",confirmButtonText:"OK",padding:"2rem"})},e.handleChoice=function(t){e.setState({travelType:t})},e.getAudio=function(t){e.setState({audio:t})},e.state={staticMapUrl:"",formatedWalkTime:"",formatedCycleTime:"",walkTime:"",cycleTime:"",podcastList:[],travelType:"walk",audio:"",isLoadingMap:!1,isLoadingPodcast:!1},e.staticMapRef=o.a.createRef(),e.inputAddressRef=o.a.createRef(),e.toTopRef=o.a.createRef(),e}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"App"},o.a.createElement("header",{ref:this.toTopRef},o.a.createElement(E,{goToInput:this.goToScroll})),o.a.createElement("section",{ref:this.inputAddressRef},o.a.createElement(T,{submitForm:this.handleAddressSubmit,isLoadingMap:this.state.isLoadingMap,loadMapUrl:this.loadMapUrl})),this.state.staticMapUrl&&""!==this.state.formatedWalkTime&&!this.state.isLoadingMap?o.a.createElement("section",{className:"routeMap",id:"routeMap"},o.a.createElement("div",{className:"routeMapContainer wrapper"},o.a.createElement("h2",{ref:this.staticMapRef,className:"routeMapHeader"},"Your Travel Route"),o.a.createElement("p",null,"Map overview of your commute."),o.a.createElement("p",null,"Please scroll to the next section to pick your travel preference."),o.a.createElement("img",{src:this.state.staticMapUrl,className:"routeMapImg",alt:"Route on map"}))):null,""===this.state.formatedWalkTime||this.state.isLoadingMap?null:o.a.createElement(N,{walkTime:this.state.formatedWalkTime,cycleTime:this.state.formatedCycleTime,chooseTravelType:this.handleChoice}),this.state.staticMapUrl&&""!==this.state.formatedWalkTime&&!this.state.isLoadingMap?o.a.createElement(b,{submitForm:this.handlePodcastSubmit,isLoadingPodcast:this.state.isLoadingPodcast,loadPodcastList:this.loadPodcastList}):null,0===this.state.podcastList.length||this.state.isLoadingMap||this.state.isLoadingMap?null:o.a.createElement("section",null,o.a.createElement(S,{podcastList:this.state.podcastList,getAudioItem:this.getAudio,isLoadingPodcast:this.state.isLoadingPodcast})),""!==this.state.audio?o.a.createElement("section",{className:"audioPlayer"},this.state.audio?o.a.createElement(A,{audioToPlay:this.state.audio}):""):null,o.a.createElement("button",{className:"toTop",onClick:function(){return L(e.toTopRef)}},o.a.createElement(v.a,{icon:"arrow-circle-up",className:"icon"})),o.a.createElement(P,null))}}]),a}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},58:function(e,t,a){e.exports=a(144)},63:function(e,t,a){}},[[58,1,2]]]);
//# sourceMappingURL=main.65adb013.chunk.js.map